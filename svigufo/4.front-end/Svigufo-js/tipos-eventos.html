<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Svigufo - Eventos públicos e privados</title>
  <!-- Estilos -->
  <link rel="stylesheet" href="./assets/css/flexbox.css" />
  <link rel="stylesheet" href="./assets/css/reset.css" />
  <link rel="stylesheet" href="./assets/css/style.css" />

  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
    crossorigin="anonymous" />
</head>

<body>
  <header class="cabecalhoPrincipal">
    <div class="container">
      <img src="./assets/img/icon-login.png" />

      <nav class="cabecalhoPrincipal-nav">
        Administrador <i class="fa fa-cog" style="margin-left: 10px" aria-hidden="true"></i>
      </nav>
    </div>
  </header>

  <main class="conteudoPrincipal">
    <section class="conteudoPrincipal-cadastro">
      <h1 class="conteudoPrincipal-cadastro-titulo">Tipos de Eventos</h1>
      <div class="container" id="conteudoPrincipal-lista">

        <table id="tabela-lista">
          <thead>
            <tr>
              <th>#</th>
              <th>Título</th>
              <th>Ação</th>
            </tr>
          </thead>

          <tbody id="tabela-lista-corpo">
            <!-- <tr>
              <td>1</td>
              <td>Tipo Evento A</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Tipo Evento B</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>3</td>
              <td>Tipo Evento C</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>4</td>
              <td>Tipo Evento D</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>2</td>
              <td>Tipo Evento B</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>3</td>
              <td>Tipo Evento C</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>4</td>
              <td>Tipo Evento D</td>
              <td>Editar/Excluir</td>
            </tr>

            <tr>
              <td>2</td>
              <td>Tipo Evento B</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>3</td>
              <td>Tipo Evento C</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>4</td>
              <td>Tipo Evento D</td>
              <td>Editar/Excluir</td>
            </tr>

            <tr>
              <td>2</td>
              <td>Tipo Evento B</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>3</td>
              <td>Tipo Evento C</td>
              <td>Editar/Excluir</td>
            </tr>
            <tr>
              <td>4</td>
              <td>Tipo Evento D</td>
              <td>Editar/Excluir</td>
            </tr> -->


          </tbody>

        </table>

        <div class="paginacao">
          <a href="javascript:prevPage()" id="btn_prev">&laquo;</a>
          <a id="page"></a>
          <a href="javascript:nextPage()" id="btn_next">&raquo;</a>
        </div>


      </div>

      <div class="container" id="conteudoPrincipal-cadastro">
        <h2 class="conteudoPrincipal-cadastro-titulo">Cadastrar Tipo de Evento</h2>
        <div class="container">

          <input type="text" placeholder="tipo do evento">

        </div>
        <button class="conteudoPrincipal-btn conteudoPrincipal-btn-cadastro">Cadastrar</button>
      </div>
    </section>
  </main>

  <footer class="rodapePrincipal">
    <section class="rodapePrincipal-patrocinadores">
      <div class="container">
        <p>Escola SENAI de Informática - 2019</p>
      </div>
    </section>
  </footer>

  <script>
    var current_page = 1;
    var records_per_page = 2;

    var objJson = [];

    const URL = `http://localhost:51422/api/tiposeventos`;
    fetch(URL)
      .then(resposta => resposta.json())
      .then(data => objJson = data)
      .catch(erro => console.error(erro));

    console.log(objJson);

    function prevPage() {
      if (current_page > 1) {
        current_page--;
        changePage(current_page);
      }
    }

    function nextPage() {
      if (current_page < numPages()) {
        current_page++;
        changePage(current_page);
      }
    }

    function changePage(page) {
      var btn_next = document.getElementById("btn_next");
      var btn_prev = document.getElementById("btn_prev");
      var listing_table = document.getElementById("tabela-lista-corpo");
      var page_span = document.getElementById("page");

      // Validate page
      if (page < 1) page = 1;
      if (page > numPages()) page = numPages();

      listing_table.innerHTML = "";

      for (var i = (page - 1) * records_per_page; i < (page * records_per_page); i++) {
        let linha = document.createElement("tr");
        let itemDaLinhaId = document.createElement("td");
        itemDaLinhaId.innerText = objJson[i].id;
        let itemDaLinhaNome = document.createElement("td");
        itemDaLinhaNome.innerText = objJson[i].nome;
        let itemDaLinhaOpcao = document.createElement("td");
        itemDaLinhaOpcao.innerText = "Edição";
        linha.appendChild(itemDaLinhaId);
        linha.appendChild(itemDaLinhaNome);
        linha.appendChild(itemDaLinhaOpcao);
        listing_table.appendChild(linha);
        // listing_table.innerHTML += objJson[i].adName + "<br>";
      }
      page_span.innerHTML = page;

      if (page == 1) {
        btn_prev.style.visibility = "hidden";
      } else {
        btn_prev.style.visibility = "visible";
      }

      if (page == numPages()) {
        btn_next.style.visibility = "hidden";
      } else {
        btn_next.style.visibility = "visible";
      }
    }

    function numPages() {
      return Math.ceil(objJson.length / records_per_page);
    }

    window.onload = function () {
      changePage(1);
    };
  </script>

  <script src="https://use.fontawesome.com/6597eb2fde.js"></script>
</body>

</html>